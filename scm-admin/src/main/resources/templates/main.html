<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>耗材供应链管理平台</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="../static/css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="../static/css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>
    <link href="../static/css/style.min.css" th:href="@{/css/style.min.css}" rel="stylesheet"/>
    <link href="../static/css/animate.min.css" th:href="@{/css/animate.min.css}" rel="stylesheet"/>
    <style>
        .dashboard-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 0;
            margin-bottom: 20px;
        }
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
        }
        .stat-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #666;
            font-size: 1.1em;
        }
        .chart-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .chart-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        .recent-activity {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .activity-item {
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        .activity-item:last-child {
            border-bottom: none;
        }
        .activity-time {
            color: #999;
            font-size: 0.9em;
        }
        .progress-custom {
            height: 8px;
            border-radius: 4px;
        }
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-success { background-color: #5cb85c; }
        .status-warning { background-color: #f0ad4e; }
        .status-danger { background-color: #d9534f; }
        .status-info { background-color: #5bc0de; }
        .chart-area {
            height: 300px;
            width: 100%;
        }
    </style>
</head>

<body class="gray-bg">
    <!-- 顶部欢迎区域 -->
    <div class="dashboard-header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-8">
                    <h1><i class="fa fa-truck"></i> 耗材供应链管理平台</h1>
                    <p class="lead">欢迎回来，管理员！今天是 <span id="currentDate"></span></p>
                </div>
                <div class="col-md-4 text-right">
                    <div class="row">
                        <div class="col-xs-6">
                            <div class="text-center">
                                <h3 id="currentTime">--:--</h3>
                                <small>当前时间</small>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="text-center">
                                <h3>v<span th:text="${version}">4.8.0</span></h3>
                                <small>系统版本</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="wrapper wrapper-content">
        <div class="container-fluid">
            <!-- 统计卡片区域 -->
            <div class="row">
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon text-primary">
                            <i class="fa fa-cubes"></i>
                        </div>
                        <div class="stat-number text-primary">1,234</div>
                        <div class="stat-label">库存商品总数</div>
                        <div class="progress progress-custom">
                            <div class="progress-bar progress-bar-primary" style="width: 75%"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon text-success">
                            <i class="fa fa-shopping-cart"></i>
                        </div>
                        <div class="stat-number text-success">856</div>
                        <div class="stat-label">本月订单数量</div>
                        <div class="progress progress-custom">
                            <div class="progress-bar progress-bar-success" style="width: 85%"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon text-warning">
                            <i class="fa fa-users"></i>
                        </div>
                        <div class="stat-number text-warning">156</div>
                        <div class="stat-label">活跃供应商</div>
                        <div class="progress progress-custom">
                            <div class="progress-bar progress-bar-warning" style="width: 65%"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6">
                    <div class="stat-card text-center">
                        <div class="stat-icon text-info">
                            <i class="fa fa-money"></i>
                        </div>
                        <div class="stat-number text-info">¥2.8M</div>
                        <div class="stat-label">本月交易额</div>
                        <div class="progress progress-custom">
                            <div class="progress-bar progress-bar-info" style="width: 90%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 图表区域 -->
            <div class="row">
                <!-- 销售趋势图 -->
                <div class="col-lg-8">
                    <div class="chart-container">
                        <div class="chart-title">
                            <i class="fa fa-line-chart"></i> 近6个月销售趋势
                        </div>
                        <div id="salesChart" class="chart-area"></div>
                    </div>
                </div>
                
                <!-- 库存状态 -->
                <div class="col-lg-4">
                    <div class="chart-container">
                        <div class="chart-title">
                            <i class="fa fa-pie-chart"></i> 库存状态分布
                        </div>
                        <div id="inventoryChart" class="chart-area"></div>
                    </div>
                </div>
            </div>

            <!-- 第二行图表 -->
            <div class="row">
                <!-- 供应商排名 -->
                <div class="col-lg-6">
                    <div class="chart-container">
                        <div class="chart-title">
                            <i class="fa fa-trophy"></i> 供应商交易排名
                        </div>
                        <div id="supplierChart" class="chart-area"></div>
                    </div>
                </div>
                
                <!-- 商品分类统计 -->
                <div class="col-lg-6">
                    <div class="chart-container">
                        <div class="chart-title">
                            <i class="fa fa-bar-chart"></i> 商品分类统计
                        </div>
                        <div id="categoryChart" class="chart-area"></div>
                    </div>
                </div>
            </div>

            <!-- 实时信息和活动 -->
            <div class="row">
                <!-- 系统状态 -->
                <div class="col-lg-4">
                    <div class="chart-container">
                        <div class="chart-title">
                            <i class="fa fa-server"></i> 系统状态监控
                        </div>
                        <div class="activity-item">
                            <span class="status-indicator status-success"></span>
                            <strong>数据库连接</strong>
                            <span class="pull-right text-success">正常</span>
                        </div>
                        <div class="activity-item">
                            <span class="status-indicator status-success"></span>
                            <strong>缓存服务</strong>
                            <span class="pull-right text-success">正常</span>
                        </div>
                        <div class="activity-item">
                            <span class="status-indicator status-warning"></span>
                            <strong>磁盘空间</strong>
                            <span class="pull-right text-warning">75%</span>
                        </div>
                        <div class="activity-item">
                            <span class="status-indicator status-success"></span>
                            <strong>内存使用</strong>
                            <span class="pull-right text-success">45%</span>
                        </div>
                        <div class="activity-item">
                            <span class="status-indicator status-info"></span>
                            <strong>CPU使用率</strong>
                            <span class="pull-right text-info">32%</span>
                        </div>
                    </div>
                </div>

                <!-- 最近活动 -->
                <div class="col-lg-4">
                    <div class="recent-activity">
                        <div class="chart-title">
                            <i class="fa fa-clock-o"></i> 最近活动
                        </div>
                        <div class="activity-item">
                            <div><strong>新订单创建</strong></div>
                            <div class="activity-time">订单号: ORD-2024-001234</div>
                            <div class="activity-time">2分钟前</div>
                        </div>
                        <div class="activity-item">
                            <div><strong>库存预警</strong></div>
                            <div class="activity-time">商品: 打印机耗材A型</div>
                            <div class="activity-time">15分钟前</div>
                        </div>
                        <div class="activity-item">
                            <div><strong>供应商审核</strong></div>
                            <div class="activity-time">供应商: 深圳科技公司</div>
                            <div class="activity-time">1小时前</div>
                        </div>
                        <div class="activity-item">
                            <div><strong>系统备份</strong></div>
                            <div class="activity-time">数据库备份完成</div>
                            <div class="activity-time">2小时前</div>
                        </div>
                        <div class="activity-item">
                            <div><strong>用户登录</strong></div>
                            <div class="activity-time">用户: 张三</div>
                            <div class="activity-time">3小时前</div>
                        </div>
                    </div>
                </div>

                <!-- 快速操作 -->
                <div class="col-lg-4">
                    <div class="chart-container">
                        <div class="chart-title">
                            <i class="fa fa-bolt"></i> 快速操作
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <a href="javascript:;" class="btn btn-primary btn-block" style="margin-bottom: 10px;">
                                    <i class="fa fa-plus"></i><br>新增订单
                                </a>
                            </div>
                            <div class="col-xs-6">
                                <a href="javascript:;" class="btn btn-success btn-block" style="margin-bottom: 10px;">
                                    <i class="fa fa-cubes"></i><br>库存管理
                                </a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <a href="javascript:;" class="btn btn-warning btn-block" style="margin-bottom: 10px;">
                                    <i class="fa fa-users"></i><br>供应商管理
                                </a>
                            </div>
                            <div class="col-xs-6">
                                <a href="javascript:;" class="btn btn-info btn-block" style="margin-bottom: 10px;">
                                    <i class="fa fa-chart-bar"></i><br>报表中心
                                </a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <a href="javascript:;" class="btn btn-danger btn-block" style="margin-bottom: 10px;">
                                    <i class="fa fa-exclamation-triangle"></i><br>预警管理
                                </a>
                            </div>
                            <div class="col-xs-6">
                                <a href="javascript:;" class="btn btn-default btn-block" style="margin-bottom: 10px;">
                                    <i class="fa fa-cog"></i><br>系统设置
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/js/bootstrap.min.js}"></script>
    <script th:src="@{/ajax/libs/report/echarts/echarts-all.min.js}"></script>
    
    <script>
        // 更新时间显示
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('zh-CN', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            const dateString = now.toLocaleDateString('zh-CN', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                weekday: 'long'
            });
            
            document.getElementById('currentTime').textContent = timeString;
            document.getElementById('currentDate').textContent = dateString;
        }
        
        // 每秒更新时间
        setInterval(updateTime, 1000);
        updateTime();

        // 初始化图表
        $(document).ready(function() {
            // 销售趋势图
            var salesChart = echarts.init(document.getElementById('salesChart'));
            var salesOption = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['销售额 (万元)', '订单数量']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: ['1月', '2月', '3月', '4月', '5月', '6月']
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: '销售额 (万元)',
                        type: 'line',
                        stack: 'Total',
                        data: [120, 190, 300, 500, 200, 300],
                        smooth: true,
                        itemStyle: {
                            color: '#667eea'
                        }
                    },
                    {
                        name: '订单数量',
                        type: 'line',
                        stack: 'Total',
                        data: [65, 59, 80, 81, 56, 55],
                        smooth: true,
                        itemStyle: {
                            color: '#764ba2'
                        }
                    }
                ]
            };
            salesChart.setOption(salesOption);

            // 库存状态饼图
            var inventoryChart = echarts.init(document.getElementById('inventoryChart'));
            var inventoryOption = {
                tooltip: {
                    trigger: 'item'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left'
                },
                series: [
                    {
                        name: '库存状态',
                        type: 'pie',
                        radius: '50%',
                        data: [
                            {value: 65, name: '正常库存', itemStyle: {color: '#5cb85c'}},
                            {value: 20, name: '低库存', itemStyle: {color: '#f0ad4e'}},
                            {value: 10, name: '缺货', itemStyle: {color: '#d9534f'}},
                            {value: 5, name: '积压', itemStyle: {color: '#5bc0de'}}
                        ],
                        emphasis: {
                            itemStyle: {
                                shadowBlur: 10,
                                shadowOffsetX: 0,
                                shadowColor: 'rgba(0, 0, 0, 0.5)'
                            }
                        }
                    }
                ]
            };
            inventoryChart.setOption(inventoryOption);

            // 供应商排名柱状图
            var supplierChart = echarts.init(document.getElementById('supplierChart'));
            var supplierOption = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['供应商A', '供应商B', '供应商C', '供应商D', '供应商E'],
                    axisTick: {
                        alignWithLabel: true
                    }
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: '交易金额 (万元)',
                        type: 'bar',
                        barWidth: '60%',
                        data: [120, 190, 300, 500, 200],
                        itemStyle: {
                            color: function(params) {
                                var colors = ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#4facfe'];
                                return colors[params.dataIndex];
                            }
                        }
                    }
                ]
            };
            supplierChart.setOption(supplierOption);

            // 商品分类统计
            var categoryChart = echarts.init(document.getElementById('categoryChart'));
            var categoryOption = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['打印机耗材', '办公用品', '电子设备', '清洁用品', '其他'],
                    axisTick: {
                        alignWithLabel: true
                    }
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: '商品数量',
                        type: 'bar',
                        barWidth: '60%',
                        data: [300, 250, 180, 120, 80],
                        itemStyle: {
                            color: function(params) {
                                var colors = ['#5cb85c', '#f0ad4e', '#d9534f', '#5bc0de', '#667eea'];
                                return colors[params.dataIndex];
                            }
                        }
                    }
                ]
            };
            categoryChart.setOption(categoryOption);

            // 响应式调整
            window.addEventListener('resize', function() {
                salesChart.resize();
                inventoryChart.resize();
                supplierChart.resize();
                categoryChart.resize();
            });
        });
    </script>
</body>
</html> 